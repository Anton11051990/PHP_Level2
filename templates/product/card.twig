<div class="container-fluid">
    <div class="px-lg-5">
        <!-- For demo purpose -->
        <div class="row py-3">
            <div class="col-lg-12 mx-auto">
                <div class="text-white p-2 shadow-sm rounded banner text-center">
                    <h1 class="display-6">{{ product.name }}</h1>
                </div>
            </div>
        </div>
        <!-- End -->
        <div class="row d-flex">
            <div class="col-md-6 col-12">
                <img src="../../img/{{ product.image }}" alt="Product image" style="width: 30vw;">
            </div>
            <div class="col-md-6 col-12">
                <div class="col-md-12">
                    <a href="/product/catalog" style="font-size: 2em; text-decoration: none;" class="">Назад</a>
                    <h4 class="mt-2">{{ product.name }}</h4>
                    <p class="">{{ product.description }}</p>
                    <p class="">Цена: {{ product.price }} руб.</p>
                </div>
                <div class="d-flex justify-content-center">
                    <button data-id="{{ product.id }}"
                            style="padding: 5px 5px;
                               background-color: grey;
                               margin: 0 1.5em 1em 1.5em;
                               width: 100%;
                               text-align: center;
                               color: white;
                               border: none; " class="rounded-pill buy"
                    >Купить</button>
                    <a href="/adminProduct/edit/?id={{ product.id }}"
                            style="padding: 5px 5px;
                               background-color: deepskyblue;
                               margin: 0 1.5em 1em 1.5em;
                               width: 100%;
                               text-align: center;
                               color: white;
                               border: none; " class="rounded-pill"
                    >Редактировать</a>
                    <a href="/adminProduct/delete/?id={{ product.id }}"
                       style="padding: 5px 5px;
                               background-color: red;
                               margin: 0 1.5em 1em 1.5em;
                               width: 100%;
                               text-align: center;
                               color: white;
                               border: none; " class="rounded-pill"
                    >Удалить товар</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let button = document.querySelector('.buy');
    button.addEventListener('click', ()=>{
            let id = button.getAttribute('data-id');
            (
                async () => {
                    const response = await fetch('/basket/add/?id=' + id);
                    const anwser = await response.json();
                    document.getElementById('count').innerText = anwser.count;
                }
            )();
        })
</script>